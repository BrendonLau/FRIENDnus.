(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{144:function(e,t,n){},173:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(24),i=n.n(a),s=(n(88),n(7)),o=n(46),l=(n(164),n(205),n(204),o.a.initializeApp({apiKey:"AIzaSyBzHaEYddrI_OKNqAAZFMc6I5GR-WgUhcQ",authDomain:"orbital-face6.firebaseapp.com",projectId:"orbital-face6",storageBucket:"orbital-face6.appspot.com",messagingSenderId:"620395179329",appId:"1:620395179329:web:a50561f62efe0bff3e85c0",measurementId:"G-7VWFEPZ3PL"})),u=o.a.firestore(),d=l.auth(),j=u,b=n(1),f=c.a.createContext();function h(){return Object(r.useContext)(f)}function m(e){var t=e.children,n=Object(r.useState)(),c=Object(s.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(!0),l=Object(s.a)(o,2),u=l[0],j=l[1];d.onAuthStateChanged((function(e){i(e)})),Object(r.useEffect)((function(){return d.onAuthStateChanged((function(e){i(e),j(!1)}))}),[]);var h={currentUser:a,signup:function(e,t){return d.createUserWithEmailAndPassword(e,t)},login:function(e,t){return d.signInWithEmailAndPassword(e,t)},logout:function(){return d.signOut()},resetPassword:function(e){return d.sendPasswordResetEmail(e)},updatePassword:function(e){return a.updatePassword(e)},updateEmail:function(e){return a.updateEmail(e)}};return Object(b.jsx)(f.Provider,{value:h,children:!u&&t})}var x=n(37),O=n(30),p=n(135),g=n(159);function v(e){var t=e.component,n=Object(g.a)(e,["component"]),r=h().currentUser;return Object(b.jsx)(O.b,Object(p.a)(Object(p.a)({},n),{},{render:function(e){return r?Object(b.jsx)(t,Object(p.a)({},e)):Object(b.jsx)(O.a,{to:"/login"})}}))}var y=n(9),w=n.n(y),C=n(19),N=n(13),k=n(221),L=n(224),S=n(215),E=n(223),R=n(228),A=n(229),F=n(230),D=n(227),q=n(127),T=n(220),G=n(219),I=n(218),P=n.p+"static/media/iconfinder-512.02823358.png",U=n(114),z=n(156),W=function(e){var t=e.requestData,n=e.setRequestEmails,c=e.setFriends,a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],l=i[1],u=h().currentUser,d=function(){var e=Object(N.a)(w.a.mark((function e(){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),n=[],e.next=4,j.collection("users").where("email","==",u.email).get().then((function(e){e.docs.forEach((function(e){n=e.data().friendList}))}));case 4:return n=[].concat(Object(C.a)(n),[t.email]),e.next=7,j.collection("users").doc(u.email).update({friendList:n}).then((function(){return console.log("friend is added successfully added to currentUser")}));case 7:return r=[],e.next=10,j.collection("users").where("email","==",t.email).get().then((function(e){e.docs.forEach((function(e){r=e.data().friendList}))}));case 10:return r=[].concat(Object(C.a)(r),[u.email]),e.next=13,j.collection("users").doc(t.email).update({friendList:r}).then((function(){return console.log("friend is added successfully added to receiver")}));case 13:return z.b.success(t.firstName+" is added successfully!",[4]),a=[],e.next=17,j.collection("users").where("email","!=",u.email).get().then((function(e){e.docs.forEach((function(e){n.includes(e.data().email)&&(a=[].concat(Object(C.a)(a),[e.data()]))}))})).then((function(){return console.log("successfully read all in friendlist")}));case 17:c(a),m(),l(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),m(),l(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function m(){return x.apply(this,arguments)}function x(){return(x=Object(N.a)(w.a.mark((function e(){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,j.collection("users").where("email","==",u.email).get().then((function(e){e.docs.forEach((function(e){r=e.data().friendRequest}))})).then((function(){return console.log("Fetched request array")}));case 3:return r=r.filter((function(e){return e!==t.email&&e})),e.next=6,j.collection("users").doc(u.email).update({friendRequest:r}).then((function(){return console.log("Request removed")}));case 6:n(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{style:{borderBottom:"solid",borderColor:"#ebebeb",borderWidth:"0.5px",display:"flex"},children:[Object(b.jsx)("div",{style:{float:"left",margin:"2%",width:"10%"},children:Object(b.jsx)(I.a,{src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{float:"left",marginTop:"3%",marginLeft:"2%",width:"40%"},children:Object(b.jsx)("p",{children:t.firstName+" "+t.lastName})}),Object(b.jsxs)("div",{style:{float:"right",width:"35%",display:"flex",marginRight:"1%",marginTop:"3%",justifyContent:"space-between"},children:[Object(b.jsx)(U.a,{style:{fontSize:"10px",height:"25px"},size:"sm",disabled:o,onClick:d,children:"Accept"}),Object(b.jsx)(U.a,{style:{fontSize:"10px",height:"25px"},variant:"light",size:"sm",disabled:o,onClick:f,children:"Delete"})]})]})},H=function(e){var t=e.userData,n=e.setFriends,c=Object(r.useState)([]),a=Object(s.a)(c,2),i=a[0],o=a[1],l=Object(r.useState)([]),u=Object(s.a)(l,2),d=u[0],f=u[1];return Object(r.useEffect)((function(){f(t.friendRequest)}),[t.friendRequest]),Object(r.useEffect)((function(){var e=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o([]),e.next=3,j.collection("users").get().then((function(e){e.docs.forEach((function(e){d.includes(e.data().email)&&o((function(t){return[].concat(Object(C.a)(t),[e.data()])}))}))})).then((function(){return console.log("successfully read all requests")})).catch((function(e){return console.log("Error in reading requests :",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();d&&e()}),[d]),Object(b.jsx)("div",{children:i.map((function(e){return Object(b.jsx)(W,{setRequestEmails:f,requestData:e,setFriends:n},e.firstName+i.phone)}))})},B=function(e){var t=e.setFriends,n=Object(r.useState)(""),c=Object(s.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(""),l=Object(s.a)(o,2),u=l[0],d=l[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),x=m[0],p=m[1],g=h(),v=g.logout,y=g.currentUser,C=Object(O.g)(),U=Object(r.useState)(!0),z=Object(s.a)(U,2),W=z[0],B=z[1];function V(){return(V=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(""),e.prev=1,e.next=4,v;case 4:C.push("/login"),i("Hello"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}Object(r.useEffect)((function(){(function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("users").where("email","==",y.email).get().then((function(e){e.docs.forEach((function(e){d(e.data())}))})).then((function(){return console.log("successfully read profile photo for menu")})).catch((function(e){return console.log("Error in reading profile photo for menu",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[y.email]);return Object(b.jsxs)("div",{children:[Object(b.jsxs)(k.a,{collapseOnSelect:!0,expand:"xl",bg:"primary",variant:"dark",children:[Object(b.jsxs)(k.a.Brand,{href:"/",style:{paddingLeft:"8%"},children:[Object(b.jsx)("img",{src:P,alt:"",style:{width:"32px",height:"32px"}}),"FRIENDnus"]}),Object(b.jsx)(k.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(b.jsx)(k.a.Collapse,{id:"responsive-navbar-nav",children:Object(b.jsxs)(L.a,{className:"justify-content-end",style:{width:"88%"},children:[Object(b.jsx)(q.a,{placement:"bottom",title:"match",children:Object(b.jsx)(T.a,{children:Object(b.jsx)(L.a.Link,{href:"/match",children:Object(b.jsx)(R.a,{style:{fontSize:"24px",color:"white"}})})})}),Object(b.jsx)(T.a,{count:W?u&&u.friendRequest.length:0,size:"small",offset:[-7,7],children:Object(b.jsx)(L.a.Link,{onClick:function(){p(!0)},children:Object(b.jsx)(A.a,{style:{fontSize:"24px",color:"white"}})})}),Object(b.jsx)(G.a,{title:"Friend Request",width:"350px",visible:x,onClose:function(){B(!1),p(!1)},children:Object(b.jsx)(H,{setFriends:t,userData:u})}),Object(b.jsx)(q.a,{placement:"bottom",title:"home",children:Object(b.jsx)(T.a,{children:Object(b.jsx)(L.a.Link,{href:"/",children:Object(b.jsx)(F.a,{style:{fontSize:"24px",color:"white"}})})})}),Object(b.jsxs)(S.a,{title:Object(b.jsx)(I.a,{size:25,icon:Object(b.jsx)(D.a,{}),src:u.image}),id:"collasible-nav-dropdown",alignRight:!0,children:[Object(b.jsx)(S.a.Item,{href:"/profile",children:"Profile"}),Object(b.jsx)(S.a.Divider,{}),Object(b.jsx)(S.a.Item,{href:"/login",onClick:function(){return V.apply(this,arguments)},children:"Log Out"})]})]})})]}),a&&Object(b.jsx)(E.a,{variant:"danger",children:a})]})},V=n(225),M=n(68),Y=n(217),K=n(211),_=n(231);function J(e){var t=e.friend,n=e.setChatData,c=e.setFriends,a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),f=d[0],m=d[1],x=h().currentUser,O=function(){var e=Object(N.a)(w.a.mark((function e(){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=[],e.next=4,j.collection("users").where("email","==",x.email).get().then((function(e){e.docs.forEach((function(e){n=(n=e.data().friendList).filter((function(e){return e!==t.email&&e}))}))}));case 4:return e.next=6,j.collection("users").doc(x.email).update({friendList:n}).then((function(){return console.log("friend removed from user.")}));case 6:return r=[],e.next=9,j.collection("users").where("email","==",t.email).get().then((function(e){e.docs.forEach((function(e){r=(r=e.data().friendList).filter((function(e){return e!==x.email&&e}))}))}));case 9:return e.next=11,j.collection("users").doc(t.email).update({friendList:r}).then((function(){return console.log("user removed from removed friend.")}));case 11:return a=[],e.next=14,j.collection("users").where("email","!=",x.email).get().then((function(e){e.docs.forEach((function(e){n.includes(e.data().email)&&(a=[].concat(Object(C.a)(a),[e.data()]))}))})).then((function(){return console.log("successfully read all in friendlist")}));case 14:c(a),z.b.success(t.firstName+" is removed successfully.",[4]),m(!1);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{style:{borderBottom:"solid",borderColor:"#ebebeb",borderWidth:"0.5px",display:"flex"},children:[Object(b.jsx)("div",{style:{float:"left",marginTop:"2%",marginRight:"1%",marginLeft:"2%",width:"10%"},children:Object(b.jsx)(I.a,{src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{onClick:function(){l(!0)},style:{float:"left",marginTop:"2.5%",width:"80%"},children:Object(b.jsx)("p",{children:t.firstName+" "+t.lastName})}),Object(b.jsx)("div",{style:{float:"right",width:"10%",marginTop:"0.5%",display:"flex",marginRight:"3%",justifyContent:"space-between"},children:Object(b.jsx)(M.a,{type:"link",size:"large",icon:Object(b.jsx)(_.a,{}),onClick:function(){n(t)}})})]}),Object(b.jsxs)(Y.a,{visible:o,onCancel:function(e){l(!1)},footer:null,children:[Object(b.jsxs)(V.a,{style:{borderRadius:"10px",display:"flex"},border:"dark",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{float:"left",padding:"2%"},children:Object(b.jsx)(I.a,{size:100,src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsxs)("div",{style:{padding:"2%",marginTop:"4%"},children:[Object(b.jsx)("p",{style:{display:"block"},children:Object(b.jsx)("strong",{children:t.firstName+" "+t.lastName})}),Object(b.jsx)("p",{children:t.major})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{style:{margin:"2%"},children:[Object(b.jsx)("h6",{children:"Bio: "}),Object(b.jsx)("p",{children:t.bio}),Object(b.jsx)("h6",{children:"Interests: "}),Object(b.jsxs)("p",{children:[" ",t.interest," "]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Email: "}),t.email]})]})]}),Object(b.jsx)(K.a,{title:"Are you sure?",disabled:f,onConfirm:O,children:Object(b.jsx)(M.a,{style:{marginTop:"2%"},type:"primary",shape:"round",children:"remove friend"})})]})]})}function Z(e){var t=e.setChatData,n=e.friends,c=e.setFriends,a=Object(r.useState)(""),i=Object(s.a)(a,2),o=i[0],l=i[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{borderBottom:"solid",borderColor:"#ebebeb"},children:Object(b.jsx)("input",{type:"text",placeholder:"Search...",style:{borderWidth:"0px",width:"100%"},onChange:function(e){l(e.target.value)}})}),Object(b.jsx)("div",{style:{overflowY:"auto",maxHeight:"400px"},children:n.filter((function(e){return(""===o||!(!e.firstName.toLowerCase().includes(o.toLocaleLowerCase())&&!e.lastName.toLowerCase().includes(o.toLowerCase())))&&e})).map((function(e){return Object(b.jsx)(J,{friend:e,setChatData:t,setFriends:c},e.phone+e.lastName)}))})]})}n(173);var Q=n(222),X=n(235),$=n(57),ee=n.n($),te=n(232),ne=n(233),re=n(85);n(144);function ce(e){var t=e.friendData,n=e.isFriend,c=t,a=h().currentUser,i=Object(r.useState)(!1),l=Object(s.a)(i,2),u=l[0],d=l[1],f=function(){var e=Object(N.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.chatList.includes(a.email)){e.next=12;break}return(t=c.chatList).push(a.email),e.next=5,j.collection("users").doc(c.email).update({chatList:t});case 5:return n=[],e.next=8,j.collection("users").where("email","==",a.email).get().then((function(e){e.docs.forEach((function(e){n=e.data().chatList}))}));case 8:return n.push(c.email),e.next=11,j.collection("users").doc(a.email).update({chatList:n});case 11:console.log("new chat added");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=c.email+a.email,x=a.email+c.email,O=j.collection("chats").doc("all").collection(m),p=j.collection("chats").doc("all").collection(x),g=O.orderBy("createdAt").limit(25),v=Object(re.a)(g,{idField:"id"}),y=Object(s.a)(v,1)[0],k=Object(r.useState)(""),L=Object(s.a)(k,2),S=L[0],E=L[1],R=function(){var e=Object(N.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(),n=S,E(""),e.next=6,O.add({text:n,createdAt:o.a.firestore.FieldValue.serverTimestamp(),time:ee()().format("HH:mm"),uid:a.email,rid:c.email});case 6:return e.next=8,p.add({text:n,createdAt:o.a.firestore.FieldValue.serverTimestamp(),time:ee()().format("HH:mm"),uid:a.email,rid:c.email});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(N.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),t=[],n=!1,e.next=5,j.collection("users").where("email","==",c.email).get().then((function(e){e.docs.forEach((function(e){for(var r=e.data().friendRequest,c=0;c<r.length;c++)if(r[c]===a.email){z.b.error("Request is already sent.",[2]),n=!0;break}n||(t=[].concat(Object(C.a)(r),[a.email]))}))})).then((function(){return console.log("fetched friend request.")}));case 5:if(n){e.next=9;break}return e.next=8,j.collection("users").doc(c.email).update({friendRequest:t}).then((function(){return console.log("friend request is added successfully.")}));case 8:z.b.success("Request has been sent.",[4]);case 9:d(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(r.useRef)();return Object(r.useEffect)((function(){return e.current.scrollIntoView()})),Object(b.jsx)("div",{ref:e})};return Object(b.jsxs)("div",{style:{border:"solid",borderWidth:"0.2px",borderColor:"#d9d9d9",height:"100%"},children:[Object(b.jsxs)("div",{style:{display:"flex",borderWidth:"0.02px",border:"solid",borderColor:"#e3e3e3",backgroundColor:"#fbfbfb"},children:[Object(b.jsx)("div",{style:{float:"left",margin:"1%",marginLeft:"3%"},children:Object(b.jsx)(I.a,{size:50,src:c.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{float:"left",marginTop:"2.5%",marginLeft:"3%"},children:Object(b.jsx)("h4",{className:"mb-4",children:c.firstName+" "+c.lastName})})]}),Object(b.jsxs)("div",{style:{height:"80vh",position:"relative",textAlign:"center"},children:[Object(b.jsxs)("main",{style:{overflowY:"auto",maxHeight:"76vh",flexDirection:"column"},children:[y&&y.map((function(e){return Object(b.jsx)(ae,{id:e.id,message:e,time:e.createdAt},e.id)})),Object(b.jsx)(F,{})]}),Object(b.jsxs)("form",{onSubmit:R,style:{position:"absolute",bottom:"0px",display:"flex",width:"100%",paddingTop:"0px"},children:[Object(b.jsx)("input",{type:"text",style:{borderWidth:"0.5px",borderRadius:"20px",marginLeft:"1%",width:"94%",float:"left"},value:S,onChange:function(e){return E(e.target.value)},placeholder:"  say something nice"}),Object(b.jsx)("button",{type:"submit",style:{borderWidth:"0px",float:"right",marginBottom:"0px",width:"6%",backgroundColor:"transparent"},disabled:!S,children:Object(b.jsx)(te.a,{size:24})}),n&&Object(b.jsx)("button",{disabled:u,style:{borderWidth:"0px",float:"right",backgroundColor:"transparent",marginRight:"2%"},onClick:A,children:Object(b.jsx)(ne.a,{})})]})]})]})}function ae(e){var t=e.message,n=t.time,r=t.text,c=t.uid===d.currentUser.email?"sent":"received";return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"message ".concat(c),children:Object(b.jsxs)("p",{name:"p-message",children:[" ",r," ",Object(b.jsx)("span",{style:{fontSize:"10px",fontFamily:"Courier New"},children:n})]})})})}var ie=n(234),se=n(212),oe=n(213),le={text:"Welcome to your group chat!",createdAt:" ",time:"",uid:"System",rid:" ",chatName:"",userList:[]},ue=function(e){var t=e.setVisibleDrawer,n=e.setNewGrpIDs,c=e.newGrpIDs,a=Object(r.useState)([]),i=Object(s.a)(a,2),l=i[0],u=i[1],d=h().currentUser,f=Object(r.useState)(""),m=Object(s.a)(f,2),x=m[0],O=m[1],p=Object(r.useState)(!1),g=Object(s.a)(p,2),v=g[0],y=g[1],k=Object(r.useState)([]),L=Object(s.a)(k,2),S=L[0],E=L[1],R=Object(r.useState)(""),A=Object(s.a)(R,2),F=A[0],q=A[1];Object(r.useEffect)((function(){var e=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,j.collection("users").where("email","==",d.email).get().then((function(e){e.docs.forEach((function(e){t=e.data().friendList}))}));case 3:return e.next=5,j.collection("users").where("email","!=",d.email).get().then((function(e){e.docs.forEach((function(e){t.includes(e.data().email)&&u((function(t){return[].concat(Object(C.a)(t),[e.data()])}))}))})).then((function(){return console.log("successfully read all in friendlist")})).catch((function(e){return console.log("Error in reading friendlist:",e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===l.length&&0===S.length&&(u([]),e())}),[d.email,l.length,S.length]);var T=function(){var e=Object(N.a)(w.a.mark((function e(r){var a,i,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=[],e.next=4,j.collection("users").where("email","==",d.email).get().then((function(e){e.docs.forEach((function(e){a=e.data().chatList}))}));case 4:for(i="GROUP"+d.email+F;a.includes(i);)i+="i",console.log(i);s=function(){var e=Object(N.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.chatList).push(i),e.next=4,j.collection("users").doc(t.email).update({chatList:n});case 4:return r=[],e.next=7,j.collection("users").where("email","==",d.email).get().then((function(e){e.docs.forEach((function(e){r=e.data().chatList}))}));case 7:return r.push(i),e.next=10,j.collection("users").doc(d.email).update({chatList:r});case 10:console.log("new chat added");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(N.a)(w.a.mark((function e(){var t,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<S.length;t++)r=S[t],s(r);a=j.collection("chats").doc("all").collection(i),le.createdAt=o.a.firestore.FieldValue.serverTimestamp(),le.time=ee()().format("HH:mm"),le.chatName=F,le.userList=S,a.doc("index").set(le),n([i].concat(Object(C.a)(c)));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),t(!1),y(!1),u([]),E([]),q("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[0!==S.length&&Object(b.jsx)(U.a,{style:{width:"100%",border:"0px",borderRadius:"10px",marginBottom:"5%"},variant:"secondary",onClick:function(){y(!0)},children:"next \u22d7"}),S.map((function(e){return Object(b.jsx)(U.a,{variant:"outline-secondary",style:{borderRadius:"20px",height:"40px"},onClick:function(){return function(e){var t=S.find((function(t){return t.email===e&&t}));E(S.filter((function(t){return t.email!==e&&t}))),u((function(e){return[].concat(Object(C.a)(e),[t])}))}(e.email)},children:Object(b.jsxs)("p",{children:[e.firstName+" "+e.lastName," ",Object(b.jsx)("b",{children:" x"})]})},e.phone+e.lastName)}))]}),0!==S.length&&Object(b.jsx)("br",{}),Object(b.jsx)(G.a,{title:"New Group",visible:v,placement:"left",onClose:function(){return y(!1)},width:"450px",children:Object(b.jsxs)("form",{onSubmit:T,style:{textAlign:"center"},children:[Object(b.jsx)("input",{placeholder:" group subject",style:{width:"100%"},onChange:function(e){return q(e.target.value)},value:F}),Object(b.jsx)(U.a,{type:"submit",width:"20%",variant:"secondary",style:{borderRadius:"50px",marginTop:"10%"},children:"create"})]})}),Object(b.jsx)("div",{style:{borderBottom:"solid",borderColor:"#ebebeb"},children:Object(b.jsx)("input",{type:"text",placeholder:"Type friend name",style:{borderWidth:"0px",width:"100%"},onChange:function(e){O(e.target.value)}})}),Object(b.jsx)("br",{}),l.filter((function(e){return(""===x||!(!e.firstName.toLowerCase().includes(x.toLocaleLowerCase())&&!e.lastName.toLowerCase().includes(x.toLowerCase())))&&e})).map((function(e){return Object(b.jsxs)(U.a,{variant:"outline-secondary",style:{width:"100%",backgroundColor:"transparent",borderWidth:"0px"},onClick:function(){return function(e){var t=l.find((function(t){return t.email===e&&t}));u(l.filter((function(t){return t.email!==e&&t}))),E((function(e){return[].concat(Object(C.a)(e),[t])}))}(e.email)},children:[Object(b.jsx)("div",{style:{float:"left",marginRight:"5%"},children:Object(b.jsx)(I.a,{size:45,src:e.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{textAlign:"left",marginTop:"3.2%"},children:Object(b.jsx)("h6",{children:e.firstName+" "+e.lastName})})]},e.major+e.lastName)}))]})},de=function(e){var t=e.chatHist,n=e.groupList,c=e.setChatData,a=e.friendEmails,i=e.setIsFriend,o=e.setGrpChatID,l=h().currentUser,u=Object(r.useState)([]),d=Object(s.a)(u,2),f=d[0],m=d[1],x=Object(r.useState)([]),O=Object(s.a)(x,2),p=O[0],g=O[1],v=Object(r.useState)([]),y=Object(s.a)(v,2),k=y[0],L=y[1],S=Object(r.useState)(!1),E=Object(s.a)(S,2),R=E[0],A=E[1],F=Object(r.useState)(!1),q=Object(s.a)(F,2),T=q[0],P=q[1],z=Object(r.useState)("1"),W=Object(s.a)(z,2),H=W[0],B=W[1];Object(r.useEffect)((function(){var e=setTimeout((function(){"3"!==H&&function(){var e=Object(N.a)(w.a.mark((function e(){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,t.map((function(e){return j.collection("chats").doc("all").collection(l.email+e.email).orderBy("createdAt","desc").limit(1).get().then((function(r){r.docs.forEach((function(r){var c=r.data();c.name=e.firstName+" "+e.lastName,c.image=e.image,(n=[].concat(Object(C.a)(n),[c])).length===t.length&&(n.sort((function(e,t){return t.createdAt.seconds-e.createdAt.seconds})),m(n))}))})),e}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),console.log("trigger 10")}),f.length===t.length?1e4:500);return function(){return clearTimeout(e)}}),[t,l.email,f,H]),Object(r.useEffect)((function(){var e=function(){var e=Object(N.a)(w.a.mark((function e(){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<k.length;t++)n=[k[t]].concat(Object(C.a)(n));return r=[],e.prev=2,e.next=5,n.map((function(e){return j.collection("chats").doc("all").collection(e).orderBy("createdAt","desc").limit(1).get().then((function(t){t.docs.forEach((function(t){var c=t.data();c.rid=e,c.name=c.chatName,(r=[].concat(Object(C.a)(r),[c])).length===n.length&&null!==r[0].createdAt&&r.sort((function(e,t){return t.createdAt.seconds-e.createdAt.seconds})),g(r),k.length>0&&m(r)}))})),e}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("error reading grouplist in chatHistory");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();p.length===n.length&&k===[]||e(),"3"===H&&m(p)}),[n,H,l.email,k]);function V(e){if(null!==e){var t=e.toDate().toString().split(" ");return t[2]+"-"+t[1]+"-"+t[3]+"\n"+t[4].substring(0,5)}return"..."}return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{textAlign:"center",backgroundColor:"#e0e0e0"}}),Object(b.jsx)(se.a,{toggle:!0,style:{width:"100%"},children:[{name:" All",value:"1"},{name:" Friends",value:"2"},{name:" Groups",value:"3"}].map((function(e,t){return Object(b.jsx)(oe.a,{type:"radio",variant:"secondary",name:"radio",value:e.value,checked:H===e.value,onChange:function(e){return function(e){B(e),A("3"===e)}(e.target.value)},children:e.name},t)}))}),R&&Object(b.jsx)(U.a,{onClick:function(){return P(!0)},variant:"outline-secondary",style:{width:"100%",border:"0px"},children:"+ New Group "}),Object(b.jsx)(G.a,{visible:T,placement:"left",title:"New Group",width:"450px",onClose:function(){return P(!1)},children:Object(b.jsx)(ue,{setVisibleDrawer:P,setNewGrpIDs:L,newGrpIDs:k})}),Object(b.jsx)("div",{style:{overflowY:"auto",maxHeight:"82vh"},children:f.filter((function(e){return("1"===H||"2"===H&&a.includes(e.rid)||"3"===H)&&e})).map((function(e){return Object(b.jsxs)(U.a,{variant:"primary",onClick:function(){return function(e){if("1"===H||"2"===H){var n=t.find((function(t){return t.email===e&&t}));try{i(!a.includes(n.email))}catch(e){console.log("error reading chat")}o(""),c(n)}else c(""),o(e)}(e.rid)},style:{display:"flex",width:"100%",backgroundColor:"transparent",borderColor:"#fafafa",borderWidth:"0.01px",color:"black"},children:[Object(b.jsx)("div",{style:{float:"left",margin:"2%"},children:"3"===H?Object(b.jsx)(I.a,{size:60,icon:Object(b.jsx)(ie.a,{})}):Object(b.jsx)(I.a,{size:60,src:e.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{margin:"2%",width:"60%"},children:Object(b.jsxs)("div",{style:{float:"left",textAlign:"left"},children:[Object(b.jsx)("h5",{children:e.name}),(n=e.text,r=22,n.length>r?n.substring(0,r)+"...":n)]})}),Object(b.jsx)("div",{style:{float:"left",margin:"2%",width:"40%"},children:Object(b.jsx)("div",{style:{float:"right",textAlign:"right"},children:Object(b.jsx)("p",{children:V(e.createdAt)})})})]},e.createdAt);var n,r}))})]})},je=n(141),be=n(226),fe=function(e){var t,n=e.chatMember,c=e.setChatMember,a=e.groupName,i=e.chatID,o=h().currentUser,l=Object(r.useState)(!1),u=Object(s.a)(l,2),d=u[0],f=u[1],m=Object(r.useState)(!1),x=Object(s.a)(m,2),O=x[0],p=x[1],g=Object(r.useState)([]),v=Object(s.a)(g,2),y=v[0],k=v[1],L=Object(r.useState)([]),S=Object(s.a)(L,2),E=S[0],R=S[1],A=Object(r.useState)(""),F=Object(s.a)(A,2),q=F[0],T=F[1],P=function(){var e=Object(N.a)(w.a.mark((function e(){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,j.collection("users").where("email","==",o.email).get().then((function(e){e.docs.forEach((function(e){t=e.data().friendList}))}));case 3:return r=n.map((function(e){return e.email})),R([]),k([]),e.next=8,j.collection("users").where("email","!=",o.email).get().then((function(e){e.docs.forEach((function(e){t.includes(e.data().email)&&!r.includes(e.data().email)&&R((function(t){return[].concat(Object(C.a)(t),[e.data()])}))}))})).then((function(){return console.log("successfully read all in friendlist")})).catch((function(e){return console.log("Error in reading friendlist:",e)}));case 8:f(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),t=[],e.next=4,j.collection("users").where("email","==",o.email).get().then((function(e){e.docs.forEach((function(e){t=e.data().chatList}))}));case 4:return t=t.filter((function(e){return e!==i})),e.next=7,j.collection("users").doc(o.email).update({chatList:t}).then("successfully leave the group");case 7:p(!1),window.location.reload();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(N.a)(w.a.mark((function e(){var t,n,r,a,s,o,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),t=[],n=Object(je.a)(y),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=14;break}return a=r.value,e.next=9,j.collection("users").where("email","==",a.email).get().then((function(e){e.docs.forEach((function(e){t=e.data().chatList}))}));case 9:return t=[].concat(Object(C.a)(t),[i]),e.next=12,j.collection("users").doc(a.email).update({chatList:t}).then("successfully added "+a.firstName+" to group");case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:s=Object(je.a)(y);try{for(l=function(){var e=o.value;c((function(t){return[].concat(Object(C.a)(t),[e])}))},s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}p(!1),f(!1);case 26:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h5",{children:(t=n.length,0===t?"":t>1?t+" members":t+" member")}),Object(b.jsx)("hr",{}),Object(b.jsx)(U.a,{onClick:P,type:"submit",variant:"outline-primary",style:{borderRadius:"30px",width:"100%"},children:"Add Members"}),Object(b.jsx)(be.a,{variant:"flush",children:n.map((function(e){return Object(b.jsx)(be.a.Item,{style:{border:"0px"},children:Object(b.jsxs)("div",{style:{width:"100%",backgroundColor:"transparent",borderWidth:"0px"},children:[Object(b.jsx)("div",{style:{float:"left",marginRight:"5%"},children:Object(b.jsx)(I.a,{size:45,src:e.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{textAlign:"left",paddingTop:"3%"},children:Object(b.jsx)("h6",{children:e.firstName+" "+e.lastName})})]})},e.firstName+e.lastName+e.firstName)}))}),Object(b.jsx)(K.a,{title:"Are you sure?",disabled:O,onConfirm:z,children:Object(b.jsx)(U.a,{variant:"secondary",style:{borderRadius:"30px",marginTop:"10%",width:"100%"},children:"Exit group"})})]}),Object(b.jsxs)(G.a,{visible:d,placement:"left",title:a,width:"450px",onClose:function(){return f(!1)},children:[0!==y.length&&Object(b.jsx)(U.a,{style:{width:"100%",border:"0px",borderRadius:"10px",marginBottom:"5%"},variant:"secondary",onClick:W,disabled:O,children:"confirm"}),y.map((function(e){return Object(b.jsx)(U.a,{variant:"outline-secondary",style:{borderRadius:"20px",height:"40px"},onClick:function(){return function(e){var t=y.find((function(t){return t.email===e&&t}));k(y.filter((function(t){return t.email!==e&&t}))),R((function(e){return[].concat(Object(C.a)(e),[t])}))}(e.email)},children:Object(b.jsxs)("p",{children:[e.firstName+" "+e.lastName," ",Object(b.jsx)("b",{children:" x"})]})},e.phone+e.lastName+e.phone)})),Object(b.jsx)("input",{type:"text",placeholder:"Type friend name",style:{borderWidth:"0px",width:"100%"},onChange:function(e){T(e.target.value)}}),E.filter((function(e){return(""===q||!(!e.firstName.toLowerCase().includes(q.toLocaleLowerCase())&&!e.lastName.toLowerCase().includes(q.toLowerCase())))&&e})).map((function(e){return Object(b.jsxs)(U.a,{variant:"outline-secondary",style:{width:"100%",backgroundColor:"transparent",borderWidth:"0px"},onClick:function(){return function(e){var t=E.find((function(t){return t.email===e&&t}));y.push(t),k(y),R(E.filter((function(t){return t.email!==e&&t})))}(e.email)},children:[Object(b.jsx)("div",{style:{float:"left",marginRight:"5%"},children:Object(b.jsx)(I.a,{size:45,src:e.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{textAlign:"left",marginTop:"3.2%"},children:Object(b.jsx)("h6",{children:e.firstName+" "+e.lastName})})]},e.major+e.lastName+e.email)}))]})]})};function he(e){var t=e.ID,n=Object(r.useState)(" "),c=Object(s.a)(n,2),a=c[0],i=c[1],l=j.collection("chats").doc("all").collection(t),u=Object(r.useState)([]),d=Object(s.a)(u,2),f=d[0],m=d[1],x=Object(r.useState)(!1),O=Object(s.a)(x,2),p=O[0],g=O[1],v=Object(r.useState)(""),y=Object(s.a)(v,2),k=y[0],L=y[1],S=h().currentUser;l.where("uid","==","System").get().then((function(e){e.forEach((function(e){i(e.data())}))}));var E=l.orderBy("createdAt").limit(25),R=Object(r.useState)(""),A=Object(s.a)(R,2),F=A[0],D=A[1],q=Object(re.a)(E,{idField:"id"}),T=Object(s.a)(q,1)[0],I=function(){var e=Object(N.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=F,D(""),e.next=5,l.add({text:n,createdAt:o.a.firestore.FieldValue.serverTimestamp(),time:ee()().format("HH:mm"),uid:S.email,chatName:a.chatName,userList:a.userList});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){m([]);var e=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("users").where("email","!=",S.email).get().then((function(e){e.docs.forEach((function(e){var n=e.data();n.chatList.includes(t)&&m((function(e){return[].concat(Object(C.a)(e),[n])}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("users").where("email","==",S.email).get().then((function(e){e.docs.forEach((function(e){L(e.data().firstName)}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),n()}),[t,S.email]);var P,z,W;return Object(b.jsxs)("div",{style:{border:"solid",borderWidth:"0.2px",borderColor:"#d9d9d9",height:"100%"},children:[Object(b.jsx)("div",{style:{display:"flex",borderWidth:"0.02px",border:"solid",borderColor:"#e3e3e3",backgroundColor:"#fbfbfb"},children:Object(b.jsx)("div",{style:{width:"100%"},children:Object(b.jsxs)(U.a,{variant:"outline-secondary",style:{borderWidth:"0px",width:"100%",backgroundColor:"transparent"},onClick:function(){g(!0)},children:[Object(b.jsx)("h4",{children:a.chatName}),(W=f,P=W.map((function(e){return e.firstName})).join(", "),z=30,P.length>z?P.substring(0,z)+"...":P)]})})}),Object(b.jsxs)("div",{style:{height:"80vh",position:"relative",textAlign:"center"},children:[Object(b.jsx)("main",{style:{overflowY:"auto",maxHeight:"77vh",flexDirection:"column"},children:T&&T.map((function(e){return Object(b.jsx)(me,{id:e.id,message:e,userName:k,chatMember:f},e.id)}))}),Object(b.jsxs)("form",{onSubmit:I,style:{position:"absolute",bottom:"0px",display:"flex",width:"100%",paddingTop:"0px"},children:[Object(b.jsx)("input",{type:"text",style:{borderWidth:"0.5px",borderRadius:"20px",marginLeft:"1%",width:"92%",float:"left"},value:F,onChange:function(e){return D(e.target.value)},placeholder:"  say something nice"}),Object(b.jsx)("button",{type:"submit",style:{borderWidth:"0px",float:"right",marginBottom:"8px"},disabled:!F,children:Object(b.jsx)(te.a,{size:24})})]})]}),Object(b.jsx)(G.a,{visible:p,placement:"left",title:a.chatName,width:"450px",onClose:function(){return g(!1)},children:Object(b.jsx)(fe,{chatMember:f,setChatMember:m,groupName:a.chatName,chatID:t})})]})}function me(e){var t=e.message,n=t.time,r=t.text,c=t.uid,a=e.userName,i=e.chatMember,s=h().currentUser,o=c===s.email?"sent":"received",l=i.find((function(e){return e.email===c&&e})),u=c===s.email?a:l?l.firstName:c;return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"message ".concat(o),children:Object(b.jsxs)("p",{name:"p-message",children:[u+":"," ",r,Object(b.jsxs)("span",{style:{fontSize:"10px",fontFamily:"Courier New"},children:[" ",n]})]})})})}function xe(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(s.a)(a,2),o=i[0],l=i[1],u=h().currentUser,d=Object(r.useState)([]),f=Object(s.a)(d,2),m=f[0],x=f[1],O=Object(r.useState)([]),p=Object(s.a)(O,2),g=p[0],v=p[1],y=Object(r.useState)(!1),k=Object(s.a)(y,2),L=k[0],S=k[1],E=Object(r.useState)(" "),R=Object(s.a)(E,2),A=R[0],F=R[1],D=Object(r.useState)(""),q=Object(s.a)(D,2),T=q[0],G=q[1];return Object(r.useEffect)((function(){var e=[],t=[],n=[],r=function(){var r=Object(N.a)(w.a.mark((function r(){var c;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.collection("users").where("email","==",u.email).get().then((function(n){n.docs.forEach((function(n){e=n.data().friendList,t=n.data().chatList}))}));case 2:for(c=0;c<t.length;c++)t[c].includes("GROUP")&&n.push(t[c]);return F(n),v(e),r.next=7,j.collection("users").where("email","!=",u.email).get().then((function(t){t.docs.forEach((function(t){e.includes(t.data().email)&&l((function(e){return[].concat(Object(C.a)(e),[t.data()])}))}))})).then((function(){return console.log("successfully read all in friendlist")})).catch((function(e){return console.log("Error in reading friendlist:",e)}));case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),c=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("users").where("email","!=",u.email).get().then((function(e){e.docs.forEach((function(e){t.includes(e.data().email)&&x((function(t){return[].concat(Object(C.a)(t),[e.data()])}))}))})).then((function(){return console.log("successfully read all in chatlist")})).catch((function(e){return console.log("Error in reading chatlist:",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0===o.length&&r(),c()}),[u.email,o.length]),Object(b.jsxs)("div",{children:[Object(b.jsx)(B,{setFriends:l}),Object(b.jsxs)("div",{className:"body",children:[Object(b.jsx)("div",{className:"leftpane",children:m!==[]&&Object(b.jsx)(de,{chatHist:m,setChatData:c,friendEmails:g,groupList:A,setIsFriend:S,setGrpChatID:G})}),Object(b.jsxs)("div",{className:"middlepane",children:[!T&&!n&&Object(b.jsxs)("div",{style:{textAlign:"center",paddingTop:"25%"},children:[Object(b.jsx)(X.a,{style:{fontSize:"100px",color:"#106cfc"}}),Object(b.jsx)("p",{children:"chat"})]}),!!n&&Object(b.jsx)(ce,{friendData:n,isFriend:L}),T&&Object(b.jsx)(he,{ID:T})]}),Object(b.jsx)("div",{className:"rightpane",children:Object(b.jsx)(Q.a,{defaultActiveKey:"0",children:Object(b.jsxs)(V.a,{children:[Object(b.jsx)(Q.a.Toggle,{as:V.a.Header,eventKey:"0",children:"Friends"}),Object(b.jsx)(Q.a.Collapse,{eventKey:"0",children:o&&Object(b.jsx)(Z,{setChatData:c,friends:o,setFriends:l})})]})})})]})]})}var Oe=n(216),pe={email:" ",firstName:" ",lastName:" ",gender:" ",phone:" ",bio:" "};function ge(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),a=h().signup,i=Object(r.useState)(""),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(""),f=Object(s.a)(d,2),m=f[0],O=f[1],p=Object(r.useState)(""),g=Object(s.a)(p,2),v=g[0],y=g[1],C=Object(r.useState)(!1),k=Object(s.a)(C,2),L=k[0],S=k[1],R=Object(r.useState)(""),A=Object(s.a)(R,2),F=A[0],D=A[1],q=Object(r.useState)(""),T=Object(s.a)(q,2),G=T[0],I=T[1],P=Object(r.useState)("Male"),z=Object(s.a)(P,2),W=z[0],H=z[1],B=Object(r.useState)("+65"),M=Object(s.a)(B,2),Y=M[0],K=M[1];function _(){return(_=Object(N.a)(w.a.mark((function r(c){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),pe.firstName=F,pe.lastName=G,pe.email=m,pe.gender=W,pe.phone=Y,pe.bio="",pe.interest="",pe.major="",pe.image="",pe.friendRequest=[],pe.friendList=[],pe.chatList=[],t.current.value===n.current.value){r.next=15;break}return r.abrupt("return",u("Password do not match!"));case 15:return r.next=17,j.collection("users").doc(m).set(pe).then((function(){return console.log("profile successfully added into database")})).catch((function(e){return console.error("Error writing document",e)}));case 17:return r.prev=17,u(""),y(""),S(!0),r.next=23,a(e.current.value,t.current.value);case 23:y("Sign up successful! Please log in."),r.next=29;break;case 26:r.prev=26,r.t0=r.catch(17),u(r.t0.message);case 29:S(!1);case 30:case"end":return r.stop()}}),r,null,[[17,26]])})))).apply(this,arguments)}return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(V.a,{children:Object(b.jsxs)(V.a.Body,{children:[Object(b.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),l&&Object(b.jsx)(E.a,{variant:"danger",children:l}),v&&Object(b.jsx)(E.a,{variant:"success",children:v}),Object(b.jsxs)(Oe.a,{onSubmit:function(e){return _.apply(this,arguments)},children:[Object(b.jsxs)(Oe.a.Group,{id:"email",children:[Object(b.jsx)(Oe.a.Label,{children:"Email"}),Object(b.jsx)(Oe.a.Control,{type:"email",ref:e,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"password",children:[Object(b.jsx)(Oe.a.Label,{children:"Password"}),Object(b.jsx)(Oe.a.Control,{type:"password",ref:t,required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"password-confirm",children:[Object(b.jsx)(Oe.a.Label,{children:"Password Confirmation"}),Object(b.jsx)(Oe.a.Control,{type:"password",ref:n,required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"firstname",children:[Object(b.jsx)(Oe.a.Label,{children:"First Name"}),Object(b.jsx)(Oe.a.Control,{type:"firstName",onChange:function(e){return D(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"lastname",children:[Object(b.jsx)(Oe.a.Label,{children:"Last Name"}),Object(b.jsx)(Oe.a.Control,{type:"lastName",onChange:function(e){return I(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"Gender",children:[Object(b.jsx)(Oe.a.Label,{children:"Gender "}),Object(b.jsxs)("select",{children:[Object(b.jsx)("option",{value:"male",onClick:function(e){return H(e.target.value)},children:"Male"}),Object(b.jsx)("option",{value:"female",onClick:function(e){return H(e.target.value)},children:"Female"})]})]}),Object(b.jsxs)(Oe.a.Group,{id:"number",children:[Object(b.jsx)(Oe.a.Label,{children:"Handphone Number"}),Object(b.jsx)(Oe.a.Control,{type:"8 digit number",onChange:function(e){return K(e.target.value)},required:!0})]}),Object(b.jsx)(U.a,{disabled:L,className:"w-100 mt-2",type:"submit",children:"Sign Up"})]})]})}),Object(b.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(b.jsx)(x.b,{to:"/login",children:"Log In"})]})]})}var ve=n(214);function ye(){return Object(b.jsx)(ve.a,{className:"container",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsx)(ge,{})})})}function we(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=h().login,a=Object(r.useState)(""),i=Object(s.a)(a,2),o=i[0],l=i[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),j=d[0],f=d[1],m=Object(O.g)();function p(){return(p=Object(N.a)(w.a.mark((function r(c){return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.prev=1,l(""),f(!0),r.next=6,n(e.current.value,t.current.value);case 6:m.push("/"),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),l(r.t0.message);case 12:f(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(V.a,{children:Object(b.jsxs)(V.a.Body,{children:[Object(b.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),o&&Object(b.jsx)(E.a,{variant:"danger",children:o}),Object(b.jsxs)(Oe.a,{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(b.jsxs)(Oe.a.Group,{id:"email",children:[Object(b.jsx)(Oe.a.Label,{children:"Email"}),Object(b.jsx)(Oe.a.Control,{type:"email",ref:e,required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"password",children:[Object(b.jsx)(Oe.a.Label,{children:"Password"}),Object(b.jsx)(Oe.a.Control,{type:"password",ref:t,required:!0})]}),Object(b.jsx)(U.a,{disabled:j,className:"w-100",type:"submit",children:"Log In"})]}),Object(b.jsx)("div",{className:"w-100 text-center mt-3",children:Object(b.jsx)(x.b,{to:"/forgot-password",children:"Forgot Password?"})})]})}),Object(b.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(b.jsx)(x.b,{to:"/signup",children:"Sign Up"})]})]})}function Ce(){return Object(b.jsx)(ve.a,{className:"container",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsx)(we,{})})})}function Ne(){var e=Object(r.useRef)(),t=h().resetPassword,n=Object(r.useState)(""),a=Object(s.a)(n,2),i=a[0],o=a[1],l=Object(r.useState)(""),u=Object(s.a)(l,2),d=u[0],j=u[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),O=m[0],p=m[1];function g(){return(g=Object(N.a)(w.a.mark((function n(r){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,j(""),o(""),p(!0),n.next=7,t(e.current.value);case 7:j("Check your inbox for further instructions"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),o(n.t0.message);case 13:p(!1);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))).apply(this,arguments)}return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(V.a,{children:Object(b.jsxs)(V.a.Body,{children:[Object(b.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),i&&Object(b.jsx)(E.a,{variant:"danger",children:i}),d&&Object(b.jsx)(E.a,{variant:"success",children:d}),Object(b.jsxs)(Oe.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(b.jsxs)(Oe.a.Group,{id:"email",children:[Object(b.jsx)(Oe.a.Label,{children:"Email"}),Object(b.jsx)(Oe.a.Control,{type:"email",ref:e,required:!0})]}),Object(b.jsx)(U.a,{disabled:O,className:"w-100 mt-2",type:"submit",children:"Reset Password"})]}),Object(b.jsx)("div",{className:"w-100 text-center mt-3",children:Object(b.jsx)(x.b,{to:"/login",children:"Login"})})]})}),Object(b.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(b.jsx)(x.b,{to:"/signup",children:"Sign Up"})]})]})}function ke(){return Object(b.jsx)(ve.a,{className:"container",children:Object(b.jsx)("div",{className:"box",children:Object(b.jsx)(Ne,{})})})}n(175);var Le=n(124);function Se(){var e=h().currentUser,t=Object(r.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],f=Object(r.useState)(u),m=Object(s.a)(f,2),x=m[0],O=m[1],p=Object(r.useState)(null),g=Object(s.a)(p,2),v=g[0],y=g[1],C=Object(r.useState)(!1),k=Object(s.a)(C,2),L=k[0],S=k[1],E=function(){var t=Object(N.a)(w.a.mark((function t(n){var r,c,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(!0),!v){t.next=12;break}return r=l.storage().ref(),c=r.child("display_images/"+v.name),t.next=6,c.put(v).then((function(){return console.log("image successfully written into storage/display_images/"+v.name)}));case 6:return t.next=8,c.getDownloadURL();case 8:return i=t.sent,d(i),t.next=12,j.collection("users").doc(e.email).update({image:i}).then((function(){return console.log("successfully updated image into datebase: ",i)})).catch((function(e){return console.log("Error in writting image :",e)}));case 12:S(!1),a(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){(function(){var t=Object(N.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.collection("users").where("email","==",e.email).get().then((function(e){e.docs.forEach((function(e){d(e.data().image),console.log("dp successfully fetched from firestore.")}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[u,e.email]);return Object(b.jsxs)("div",{className:"dp",style:{display:"flex",justifyContent:"center"},children:[Object(b.jsx)("button",{style:{border:0,backgroundColor:"transparent"},onClick:function(){O(u),a(!0)},children:Object(b.jsx)(I.a,{size:100,icon:Object(b.jsx)(D.a,{}),src:u,alt:""})}),Object(b.jsxs)(Y.a,{title:"Display Photo",visible:c,onOk:E,onCancel:function(e){y(null),O(u),a(!1)},children:[Object(b.jsx)("img",{src:x,style:{maxWidth:"100%",maxHeight:"50%"},alt:""}),!L&&Object(b.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&(O(URL.createObjectURL(e.target.files[0])),y(e.target.files[0]))}}),Object(b.jsx)("div",{style:{paddingTop:"10px"},children:Object(b.jsx)(Le.PacmanLoader,{loading:L,color:"#307fff"})})]})]})}function Ee(){var e=h().currentUser,t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){(function(){var t=Object(N.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.collection("users").where("email","==",e.email).get().then((function(e){e.docs.forEach((function(e){i(e.data()),console.log("profile data successfully fetched from firestore.")}))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.email]),Object(b.jsx)(c.a.Fragment,{children:Object(b.jsxs)(V.a,{children:[Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)(Se,{}),Object(b.jsxs)("div",{style:{marginTop:"auto",marginBottom:"auto",paddingLeft:"5%"},children:[Object(b.jsx)("p",{style:{display:"block"},children:Object(b.jsxs)("strong",{children:[a&&a.firstName+" "+a.lastName," "]})}),Object(b.jsx)("p",{children:a.major})]})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{style:{display:"flex",justifyContent:"space-between",width:"80%"}}),Object(b.jsx)("h6",{children:"Bio: "}),Object(b.jsx)("p",{children:a.bio}),Object(b.jsx)("h6",{children:"Interests:"}),Object(b.jsxs)("p",{children:[a.interest," "]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Email: "})," ",e.email," "]}),Object(b.jsx)(x.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Edit Profile"})]})})}function Re(){return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(B,{}),Object(b.jsx)("div",{className:"box",children:Object(b.jsx)(Ee,{})})]})}function Ae(e){var t=e.userData,n=Object(r.useState)(!1),a=Object(s.a)(n,2),i=a[0],o=a[1],l=Object(O.g)();return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(V.a,{style:{marginTop:"2%",marginBottom:"2%",marginLeft:"auto",marginRight:"auto",borderRadius:"15px",width:"85%",alignItems:"middle"},border:"secondary",onClick:function(){o(!0)},children:Object(b.jsxs)("div",{style:{display:"flex"},children:[Object(b.jsx)("div",{style:{width:"20%",float:"left",padding:"2%",alignItems:"center",justifyContent:"center"},children:Object(b.jsx)(I.a,{size:80,src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{width:"70%",float:"left",padding:"1%",marginLeft:"2%",textAlign:"left"},children:Object(b.jsxs)("p",{style:{verticalAlign:"middle"},children:[Object(b.jsx)("strong",{children:t.firstName+" "+t.lastName}),Object(b.jsx)("br",{}),Object(b.jsxs)("span",{style:{display:"inline-block",marginTop:"10px"},children:["Major: ",t.major]}),Object(b.jsx)("br",{}),Object(b.jsxs)("span",{children:["Interests: ",t.interest]})]})})]})}),Object(b.jsx)(Y.a,{visible:i,okText:"Chat",onCancel:function(e){o(!1)},onOk:function(e){l.push({pathname:"/chat",state:t})},children:Object(b.jsxs)(V.a,{style:{borderRadius:"10px",display:"flex"},border:"dark",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{float:"left",padding:"2%"},children:Object(b.jsx)(I.a,{size:100,src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsxs)("div",{style:{padding:"2%",marginTop:"4%"},children:[Object(b.jsx)("p",{style:{display:"block"},children:Object(b.jsx)("strong",{children:t.firstName+" "+t.lastName})}),Object(b.jsx)("p",{children:t.major})]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{style:{margin:"2%"},children:[Object(b.jsx)("h6",{children:"Bio: "}),Object(b.jsx)("p",{children:t.bio}),Object(b.jsx)("h6",{children:"Interests: "}),Object(b.jsxs)("p",{children:[" ",t.interest," "]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Email: "}),t.email]})]})]})})]})}var Fe=n.p+"static/media/iconfinder-256.e68cda01.png";function De(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=h().currentUser,i=Object(r.useState)([]),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(!1),f=Object(s.a)(d,2),m=f[0],x=f[1],O=Object(r.useState)([]),p=Object(s.a)(O,2),g=p[0],v=p[1],y=Object(r.useState)("Ready to make friends?"),k=Object(s.a)(y,2),L=k[0],S=k[1],R=Object(r.useState)("click match to connect!"),A=Object(s.a)(R,2),F=A[0],D=A[1],q=function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S("Finding..."),D("please be patient."),x(!0),n.length>0&&c([]),e.next=6,j.collection("users").get().then((function(e){e.docs.forEach((function(e){e.data().email===a.email?(u(e.data().interest.toLowerCase().split(", ")),v(e.data().friendList)):c((function(t){return[].concat(Object(C.a)(t),[e.data()])}))}))})).then((function(){return console.log("successfully read all matches")})).catch((function(e){return console.log("Error in reading matches :",e)}));case 6:x(!1),S("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{style:{textAlign:"center",width:"600px"},children:[Object(b.jsx)("br",{}),Object(b.jsxs)("div",{style:{overflowY:"auto",maxHeight:"400px"},children:[n.filter((function(e){for(var t=0;t<l.length;t++){var n=l[t],r=e.interest.toLowerCase(),c=e.email;if(r.includes(n)&&!g.includes(c))return e}return!1})).map((function(e){return Object(b.jsx)(Ae,{userData:e},e.email)})),Object(b.jsx)("div",{children:L&&Object(b.jsxs)(E.a,{variant:"light",children:[Object(b.jsx)(E.a.Heading,{children:L}),Object(b.jsx)("hr",{}),Object(b.jsx)("p",{style:{margin:"0",padding:"0"},children:"Matches are based on your interests."}),F]})})]}),!m&&Object(b.jsx)("button",{onClick:q,style:{borderRadius:"25px",borderColor:"#ebebeb",borderWidth:"0.25px",backgroundColor:"transparent",marginTop:"8%"},children:Object(b.jsx)("div",{children:Object(b.jsx)("img",{src:Fe,alt:"MATCH",style:{height:"110px",width:"110px"}})})}),Object(b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10%"},children:Object(b.jsx)(Le.PuffLoader,{loading:m,color:"#0d70e0",size:150})})]})}function qe(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(B,{}),Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:Object(b.jsx)(De,{})})]})}function Te(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),a=h(),i=a.currentUser,o=a.updatePassword,l=a.updateEmail,u=Object(r.useState)(""),d=Object(s.a)(u,2),f=d[0],m=d[1],p=Object(r.useState)(!1),g=Object(s.a)(p,2),v=g[0],y=g[1],C=Object(O.g)(),k=Object(r.useState)(""),L=Object(s.a)(k,2),S=L[0],R=L[1],A=Object(r.useState)(""),F=Object(s.a)(A,2),D=F[0],q=F[1],T=Object(r.useState)(""),G=Object(s.a)(T,2),I=G[0],P=G[1],z=Object(r.useState)(""),W=Object(s.a)(z,2),H=W[0],B=W[1],M=Object(r.useState)("Male"),Y=Object(s.a)(M,2),K=Y[0],_=Y[1],J=Object(r.useState)(""),Z=Object(s.a)(J,2),Q=Z[0],X=Z[1],$=Object(r.useState)(""),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(r.useState)(""),ce=Object(s.a)(re,2),ae=ce[0],ie=ce[1];function se(){return(se=Object(N.a)(w.a.mark((function r(c){var a;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),t.current.value===n.current.value){r.next=3;break}return r.abrupt("return",m("Passwords do not match"));case 3:return a=[],y(!0),m(""),e.current.value!==i.email&&a.push(l(e.current.value)),t.current.value&&a.push(o(t.current.value)),r.next=10,j.collection("users").doc(i.email).update({bio:ae,email:S,firstName:D,gender:K,interest:te,lastName:I,major:H,phone:Q}).then((function(){return console.log("update-profile successfully written into database.")})).catch((function(e){return console.error("Error writing document",e)}));case 10:Promise.all(a).then((function(){C.push("/")})).catch((function(e){m(e.message)})).finally((function(){y(!1)}));case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return Object(r.useEffect)((function(){(function(){var e=Object(N.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("users").where("email","==",i.email).get().then((function(e){e.docs.forEach((function(e){var t=e.data();q(t.firstName),P(t.lastName),B(t.major),X(t.phone),_(t.gender),R(t.email),ie(t.bio),ne(t.interest),console.log("update-profile data successfully fetched from firestore.")}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i.email]),Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(V.a,{children:Object(b.jsxs)(V.a.Body,{children:[Object(b.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),f&&Object(b.jsx)(E.a,{variant:"danger",children:f}),Object(b.jsx)(Se,{}),Object(b.jsxs)(Oe.a,{onSubmit:function(e){return se.apply(this,arguments)},children:[Object(b.jsxs)(Oe.a.Group,{id:"firstname",children:[Object(b.jsx)(Oe.a.Label,{children:"First Name"}),Object(b.jsx)(Oe.a.Control,{type:"firstName",defaultValue:D,required:!0,onChange:function(e){q(e.target.value)}})]}),Object(b.jsxs)(Oe.a.Group,{id:"lastname",children:[Object(b.jsx)(Oe.a.Label,{children:"Last Name"}),Object(b.jsx)(Oe.a.Control,{type:"lastName",defaultValue:I,required:!0,onChange:function(e){P(e.target.value)}})]}),Object(b.jsxs)(Oe.a.Group,{id:"major",children:[Object(b.jsx)(Oe.a.Label,{children:"Major"}),Object(b.jsx)(Oe.a.Control,{type:"major",defaultValue:H,onChange:function(e){B(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"Gender",children:[Object(b.jsx)(Oe.a.Label,{children:"Gender  "}),Object(b.jsxs)("select",{defaultValue:K,children:[Object(b.jsx)("option",{value:"male",onClick:function(e){return _(e.target.value)},children:"Male"}),Object(b.jsx)("option",{value:"female",onClick:function(e){return _(e.target.value)},children:"Female"})]})]}),Object(b.jsxs)(Oe.a.Group,{id:"number",children:[Object(b.jsx)(Oe.a.Label,{children:"Handphone Number"}),Object(b.jsx)(Oe.a.Control,{type:"8 digit number",defaultValue:Q,onChange:function(e){X(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"email",children:[Object(b.jsx)(Oe.a.Label,{children:"Email"}),Object(b.jsx)(Oe.a.Control,{type:"email",ref:e,required:!0,defaultValue:i.email,onChange:function(e){R(e.target.value)}})]}),Object(b.jsxs)(Oe.a.Group,{id:"interest",children:[Object(b.jsx)(Oe.a.Label,{children:"Interest"}),Object(b.jsx)(Oe.a.Control,{type:"interest",defaultValue:te,onChange:function(e){ne(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"bio",children:[Object(b.jsx)(Oe.a.Label,{children:"Bio"}),Object(b.jsx)(Oe.a.Control,{type:"Bio",defaultValue:ae,onChange:function(e){ie(e.target.value)},required:!0})]}),Object(b.jsxs)(Oe.a.Group,{id:"password",children:[Object(b.jsx)(Oe.a.Label,{children:"Password"}),Object(b.jsx)(Oe.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same"})]}),Object(b.jsxs)(Oe.a.Group,{id:"password-confirm",children:[Object(b.jsx)(Oe.a.Label,{children:"Password Confirmation"}),Object(b.jsx)(Oe.a.Control,{type:"password",ref:n,placeholder:"Leave blank to keep the same"})]}),Object(b.jsx)(U.a,{disabled:v,className:"w-100 mt-2",type:"submit",children:"Update"})]})]})}),Object(b.jsx)("div",{className:"w-100 text-center mt-2",children:Object(b.jsx)(x.b,{to:"/",children:"Cancel"})})]})}function Ge(e){for(var t=e.location.state,n=h().currentUser,c=t.email+n.email,a=n.email+t.email,i=j.collection("chats").doc("all").collection(c),l=j.collection("chats").doc("all").collection(a),u="GROUPCHAT"+a;t.chatList.includes(u);)u+="i";var d=i.orderBy("createdAt").limit(25),f=Object(re.a)(d,{idField:"id"}),m=Object(s.a)(f,1)[0],x=Object(r.useState)(""),O=Object(s.a)(x,2),p=O[0],g=O[1],v=Object(r.useState)(!1),y=Object(s.a)(v,2),k=y[0],L=y[1],S=function(){var e=Object(N.a)(w.a.mark((function e(r){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),E(),c=p,g(""),e.next=6,i.add({text:c,createdAt:o.a.firestore.FieldValue.serverTimestamp(),time:ee()().format("HH:mm"),uid:n.email,rid:t.email});case 6:return e.next=8,l.add({text:c,createdAt:o.a.firestore.FieldValue.serverTimestamp(),time:ee()().format("HH:mm"),uid:n.email,rid:t.email});case 8:g("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(N.a)(w.a.mark((function e(){var r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.chatList.includes(n.email)){e.next=12;break}return(r=t.chatList).push(n.email),e.next=5,j.collection("users").doc(t.email).update({chatList:r});case 5:return c=[],e.next=8,j.collection("users").where("email","==",n.email).get().then((function(e){e.docs.forEach((function(e){c=e.data().chatList}))}));case 8:return c.push(t.email),e.next=11,j.collection("users").doc(n.email).update({chatList:c});case 11:console.log("new chat added");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(w.a.mark((function e(){var r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),r=[],c=!1,e.next=5,j.collection("users").where("email","==",t.email).get().then((function(e){e.docs.forEach((function(e){for(var t=e.data().friendRequest,a=0;a<t.length;a++)if(t[a]===n.email){z.b.error("Request is already sent.",[2]),c=!0;break}c||(r=[].concat(Object(C.a)(t),[n.email]))}))})).then((function(){return console.log("fetched friend request.")}));case 5:if(c){e.next=9;break}return e.next=8,j.collection("users").doc(t.email).update({friendRequest:r}).then((function(){return console.log("friend request is added successfully.")}));case 8:z.b.success("Request has been sent.",[4]);case 9:L(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(r.useRef)();return Object(r.useEffect)((function(){return e.current.scrollIntoView()})),Object(b.jsx)("div",{ref:e})};return Object(b.jsxs)("div",{style:{height:"100%"},children:[Object(b.jsx)(B,{}),Object(b.jsxs)("div",{style:{width:"50%",margin:"auto"},children:[Object(b.jsxs)("div",{style:{display:"flex",borderWidth:"0.05px",border:"solid",borderColor:"#e3e3e3",backgroundColor:"#fbfbfb"},children:[Object(b.jsx)("div",{style:{float:"left",margin:"1%",marginLeft:"3%"},children:Object(b.jsx)(I.a,{size:50,src:t.image,icon:Object(b.jsx)(D.a,{})})}),Object(b.jsx)("div",{style:{float:"left",marginTop:"2.5%",marginLeft:"3%"},children:Object(b.jsx)("h4",{className:"mb-4",children:t.firstName+" "+t.lastName})})]}),Object(b.jsxs)("div",{style:{height:"80vh",border:"solid",borderWidth:"0.05px",borderColor:"#e3e3e3",position:"relative"},children:[Object(b.jsxs)("main",{style:{overflowY:"auto",maxHeight:"76vh",flexDirection:"column"},children:[m&&m.map((function(e){return Object(b.jsx)(Ie,{id:e.id,message:e,time:e.createdAt},e.id)})),Object(b.jsx)(A,{})]}),Object(b.jsxs)("div",{style:{position:"absolute",bottom:"3px",display:"flex",width:"100%",justifyContent:"space-between",verticalAlign:"middle",textAlign:"center"},children:[Object(b.jsxs)("form",{onSubmit:S,style:{width:"100%",paddingTop:"0px"},children:[Object(b.jsx)("input",{value:p,onChange:function(e){return g(e.target.value)},placeholder:"say something nice",style:{borderWidth:"0.5px",borderRadius:"20px",marginLeft:"1%",width:"92%",float:"left"}}),Object(b.jsx)("button",{type:"submit",disabled:!p,style:{borderWidth:"0px",float:"right",width:"4%",marginRight:"1%"},children:Object(b.jsx)(te.a,{})})]}),Object(b.jsx)("button",{disabled:k,style:{borderWidth:"0px",float:"right",backgroundColor:"white",marginRight:"2%"},onClick:R,children:Object(b.jsx)(ne.a,{})})]})]})]})]})}function Ie(e){var t=e.message,n=t.time,r=t.text,c=t.uid===d.currentUser.email?"sent":"received";return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"message ".concat(c),children:Object(b.jsxs)("p",{children:[r," ",Object(b.jsx)("span",{style:{fontSize:"10px",fontFamily:"Courier New"},children:n})]})})})}var Pe=function(){return Object(b.jsx)(x.a,{children:Object(b.jsx)(m,{children:Object(b.jsxs)(O.d,{children:[Object(b.jsx)(v,{className:"dashboard",exact:!0,path:"/",component:xe}),Object(b.jsx)(O.b,{path:"/signup",component:ye}),Object(b.jsx)(O.b,{path:"/login",component:Ce}),Object(b.jsx)(O.b,{path:"/forgot-password",component:ke}),Object(b.jsx)(O.b,{path:"/profile",component:Re}),Object(b.jsx)(O.b,{path:"/update-profile",component:Te}),Object(b.jsx)(O.b,{path:"/match",component:qe}),Object(b.jsx)(O.b,{path:"/chat",component:Ge}),Object(b.jsx)(O.b,{path:"/groupchat",component:he})]})})})},Ue=(n(202),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))});i.a.render(Object(b.jsx)(Pe,{}),document.getElementById("root")),Ue()},88:function(e,t,n){}},[[203,1,2]]]);
//# sourceMappingURL=main.7883235e.chunk.js.map